<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineMatch</title>
    <link rel="stylesheet" th:href="@{/styles.css}" />
</head>
<body>
    <main>
    <div>
        <div th:each = "colour:${coloursArray}"
             class="colour-box"
             th:style="'background-color:' + ${colour}">
        </div>
    </div>

    <div>
        <div th:each="colour, iterStat : ${coloursArray}" style="display: inline-block;">
            <div th:if="${iterStat.index == 0 or iterStat.index == 4 or iterStat.index == 8 or iterStat.index == 11}">
                <div class="colour-box" th:style="'background-color:' + ${closestMatches[iterStat.index == 0 ? 0 : (iterStat.index == 4 ? 1 : (iterStat.index == 8 ? 2 : 3))].hexCode}">
                    <p th:text="${closestMatches[iterStat.index == 0 ? 0 : (iterStat.index == 4 ? 1 : (iterStat.index == 8 ? 2 : 3))].colourName}"></p>
                    <p th:text="'Closest paint: ' + ${closestMatches[iterStat.index == 0 ? 0 : (iterStat.index == 4 ? 1 : (iterStat.index == 8 ? 2 : 3))].hexCode}"></p>
                    <a th:href="${closestMatches[iterStat.index == 0 ? 0 : (iterStat.index == 4 ? 1 : (iterStat.index == 8 ? 2 : 3))].purchaseUrl}"
                       th:if="${closestMatches[iterStat.index == 0 ? 0 : (iterStat.index == 4 ? 1 : (iterStat.index == 8 ? 2 : 3))].purchaseUrl != null}"
                       target="_blank">
                        Buy on Dulux
                    </a>
                </div>
            </div>
            <div th:unless="${iterStat.index == 0 or iterStat.index == 4 or iterStat.index == 8 or iterStat.index == 11}" class="colour-box">
                <!-- Empty placeholder to maintain alignment -->
            </div>
        </div>
    </div>

<!--    <div>-->
<!--        <div th:each="match : ${closestMatches}" style="display: inline-block;">-->
<!--            <div class="colour-box" th:style="'background-color:' + ${match.hexCode}">-->
<!--                <p th:text="${match.colourName}"></p>-->
<!--                <p th:text="'Closest paint: ' + ${match.hexCode}"></p>-->
<!--                <a th:href="${match.purchaseUrl}"-->
<!--                   th:if="${match.purchaseUrl != null}"-->
<!--                   target="_blank">-->
<!--                    Buy on Dulux-->
<!--                </a>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
</main>

</body>
</html>
